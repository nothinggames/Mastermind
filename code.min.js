let colors=["white","rgb(138, 19, 19)","rgb(14, 141, 71)","rgb(14, 58, 141)","rgb(141, 133, 14)","rgb(141, 71, 14)","rgb(120, 14, 141)"];function addLine(e,t,n){var o=document.createElement("div");o.className="line",o.id=`LINE${t}`;for(var i=0;i<4;i++)addSelect(o,t,i);addLabel(o,t),e.appendChild(o)}function addSelect(e,t,n){var o=document.createElement("select");o.className="input_color",o.id=`LINE${t}-SELECT${n}`;for(var i=0;i<7;i++)option=new Option,option.style=`background-color: ${colors[i]};`,o.options[i]=option;o.disabled=!0,o.onchange=function(e){for(var t=0;t<e.target.options.length;t++)e.target.options[t].selected&&(e.target.style=`background-color: ${colors[t]};`);onSelectorUpdate(e)},e.appendChild(o)}function addLabel(e,t,n=`Essai n°${t}`){var o=document.createElement("p");o.className="label",o.id=`LINE${t}-LABEL`,o.innerHTML=n,e.appendChild(o)}function removeLabel(e){var t=document.getElementById(`LINE${e}-LABEL`);t.parentNode.removeChild(t)}function displayButton(e){parent=document.getElementById(`LINE${e}-LABEL`);var t=document.createElement("button");t.className="confirm",t.id=`LINE${e}-BUTTON`,t.innerHTML="Valider",t.disabled=!0,t.onclick=function(e){onConfirm(e)},parent.innerHTML="",parent.appendChild(t)}function getSelected(e){for(i=0;i<e.options.length;i++)if(e.options[i].selected)return i}function customAlert(e){alertify.custom_alert||alertify.dialog("custom_alert",function(){return{main:function(e){this.message=e},setup:function(){return{buttons:[{text:"Rejouer",key:27}],focus:{element:0},options:{title:"Partie terminée !",movable:!1,closable:!1,resizable:!1,maximizable:!1}}},hooks:{onclose:function(){reset()}},prepare:function(){this.setContent(this.message)}}}),alertify.custom_alert(e)}function reset(){for(var e=document.getElementById("content"),t=10;t>0;t--)e.removeChild(document.getElementById(`LINE${t}`)),addLine(e,t);initGame()}for(var i=10;i>0;i--)addLine(document.getElementById("content"),i);function getRandomInt(e,t){return t++,e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}function generateNumber(){number="";for(var e=0;e<4;e++)number+=getRandomInt(1,6);return number}function well_placed(e,t){for(var n=e.slice(),o=t.slice(),i=0,r=0;r<4;r++)e[r]==t[r]&&(i+=1,n[r]=0,o[r]=0);return[i,o,n]}function misplaced(e,t){for(var n=0,o=0;o<4;o++)t.includes(e[o])&&0!=e[o]&&(n+=1,t[t.indexOf(e[o])]=0);return n}function check(e){return e==response||(c1=e.split(""),c2=response.split(""),test=well_placed(c1,c2),bad=misplaced(test[2],test[1]),[0,test[0],bad])}function onSelectorUpdate(e){for(var t=0,n=0;n<4;n++)0!=getSelected(document.getElementById(`LINE${life}-SELECT${n}`))&&t++;4==t&&(document.getElementById(`LINE${life}-BUTTON`).disabled=!1)}function onConfirm(e){for(var t="",n=0;n<4;n++)t+=getSelected(document.getElementById(`LINE${life}-SELECT${n}`));if(test=check(t),1==test)customAlert(`Vous avez gagné la partie !<br>Nombre d'essais: ${life}`);else if(disableLine(life,test,!0),++life<=10)enableLine(life);else{var o='Vous avez perdu !<br>Le code était: <div style="display: flex; flex-direction: row;">';for(n=0;n<4;n++)o+=`<div class="input_color" style="background-color: ${colors[response[n]]};"></div>`;customAlert(o+="</div>")}}function enableLine(e){displayButton(e);for(var t=0;t<4;t++)document.getElementById(`LINE${e}-SELECT${t}`).disabled=!1}function disableLine(e,t,n=!1){removeLabel(e),0!=n?addLabel(document.getElementById(`LINE${e}`),e,n=`Valides: ${t[1]} Mals placés: ${t[2]}`):addLabel(document.getElementById(`LINE${e}`),e);for(var o=0;o<4;o++)document.getElementById(`LINE${e}-SELECT${o}`).disabled=!0}function initGame(){response=generateNumber(),console.log(response),enableLine(life=1)}var response,life;initGame();